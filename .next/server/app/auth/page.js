(()=>{var e={};e.id=235,e.ids=[235],e.modules={3244:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3244,e.exports=t},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},4703:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(430),r(5931),r(5866);var s=r(3191),a=r(8716),i=r(7922),o=r.n(i),n=r(5231),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["auth",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,430)),"/home/project/app/auth/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5931)),"/home/project/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/project/app/auth/page.tsx"],u="/auth/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/auth/page",pathname:"/auth",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},664:(e,t,r)=>{Promise.resolve().then(r.bind(r,4200))},4200:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>V});var s=r(326),a=r(7577),i=r(5047),o=r(4723),n=r(772),l=r(4432),d=r(1048),c=r(2643),u=r(2561),p=r(3095),m=r(5594),h=r(9815),f=r(5226),x=r(7124),g=r(2067),y=r(8957),b="Tabs",[v,j]=(0,p.b)(b,[m.Pc]),N=(0,m.Pc)(),[w,S]=v(b),P=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,onValueChange:i,defaultValue:o,orientation:n="horizontal",dir:l,activationMode:d="automatic",...c}=e,u=(0,x.gm)(l),[p,m]=(0,g.T)({prop:a,onChange:i,defaultProp:o??"",caller:b});return(0,s.jsx)(w,{scope:r,baseId:(0,y.M)(),value:p,onValueChange:m,orientation:n,dir:u,activationMode:d,children:(0,s.jsx)(f.WV.div,{dir:u,"data-orientation":n,...c,ref:t})})});P.displayName=b;var O="TabsList",T=a.forwardRef((e,t)=>{let{__scopeTabs:r,loop:a=!0,...i}=e,o=S(O,r),n=N(r);return(0,s.jsx)(m.fC,{asChild:!0,...n,orientation:o.orientation,dir:o.dir,loop:a,children:(0,s.jsx)(f.WV.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:t})})});T.displayName=O;var C="TabsTrigger",k=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:a,disabled:i=!1,...o}=e,n=S(C,r),l=N(r),d=z(n.baseId,a),c=J(n.baseId,a),p=a===n.value;return(0,s.jsx)(m.ck,{asChild:!0,...l,focusable:!i,active:p,children:(0,s.jsx)(f.WV.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":c,"data-state":p?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...o,ref:t,onMouseDown:(0,u.M)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():n.onValueChange(a)}),onKeyDown:(0,u.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&n.onValueChange(a)}),onFocus:(0,u.M)(e.onFocus,()=>{let e="manual"!==n.activationMode;p||i||!e||n.onValueChange(a)})})})});k.displayName=C;var I="TabsContent",q=a.forwardRef((e,t)=>{let{__scopeTabs:r,value:i,forceMount:o,children:n,...l}=e,d=S(I,r),c=z(d.baseId,i),u=J(d.baseId,i),p=i===d.value,m=a.useRef(p);return a.useEffect(()=>{let e=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,s.jsx)(h.z,{present:o||p,children:({present:r})=>(0,s.jsx)(f.WV.div,{"data-state":p?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":c,hidden:!r,id:u,tabIndex:0,...l,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:r&&n})})});function z(e,t){return`${e}-trigger-${t}`}function J(e,t){return`${e}-content-${t}`}q.displayName=I;var R=r(7863);let A=a.forwardRef(({className:e,...t},r)=>s.jsx(T,{ref:r,className:(0,R.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));A.displayName=T.displayName;let F=a.forwardRef(({className:e,...t},r)=>s.jsx(k,{ref:r,className:(0,R.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));F.displayName=k.displayName;let M=a.forwardRef(({className:e,...t},r)=>s.jsx(q,{ref:r,className:(0,R.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));M.displayName=q.displayName;var X=r(4215),$=r(7506),_=r(2887);let E=(0,r(2881).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var Z=r(683),B=r(2945),D=r(6824);function V(){let[e,t]=(0,a.useState)(!1),[r,u]=(0,a.useState)(!1),[p,m]=(0,a.useState)("phone"),h=(0,i.useRouter)(),{toast:f}=(0,X.pm)(),{user:x,isLoading:g}=(0,Z.a)(),y=(0,B.x)(),{register:b,handleSubmit:v,formState:{errors:j},reset:N}=(0,o.cI)(),w=async e=>{t(!0);try{await D.hi.sendOTP(e.phone),f({title:"OTP Sent",description:"Please check your phone for the verification code."}),h.push(`/verify-otp?phone=${encodeURIComponent(e.phone)}`)}catch(e){f({variant:"destructive",title:"Error",description:e.message||"Failed to send OTP"})}finally{t(!1)}},S=async()=>{u(!0);try{let{error:e}=await y.auth.signInWithOAuth({provider:"google",options:{redirectTo:"https://nzkwrrinpweiqcnzeric.supabase.co/auth/v1/callback"}});if(e)throw e}catch(e){f({variant:"destructive",title:"Google Sign-In Failed",description:e.message||"Failed to sign in with Google"}),u(!1)}};return g?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx($.Z,{className:"h-8 w-8 animate-spin text-primary"})}):x?null:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,s.jsxs)(c.Zb,{className:"w-full max-w-md",children:[(0,s.jsxs)(c.Ol,{className:"text-center",children:[s.jsx(c.ll,{className:"text-2xl font-bold",children:"Welcome"}),s.jsx("p",{className:"text-muted-foreground",children:"Sign in or create an account to continue"})]}),(0,s.jsxs)(c.aY,{children:[(0,s.jsxs)(P,{value:p,onValueChange:m,className:"w-full",children:[(0,s.jsxs)(A,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(F,{value:"phone",className:"flex items-center gap-2",children:[s.jsx(_.Z,{className:"h-4 w-4"}),"Phone"]}),(0,s.jsxs)(F,{value:"google",className:"flex items-center gap-2",children:[s.jsx(E,{className:"h-4 w-4"}),"Google"]})]}),s.jsx(M,{value:"phone",className:"space-y-4 mt-6",children:(0,s.jsxs)("form",{onSubmit:v(w),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(d._,{htmlFor:"phone",children:"Phone Number"}),s.jsx(l.I,{id:"phone",type:"tel",placeholder:"+966 5XXXXXXXX",...b("phone",{required:"Phone number is required",pattern:{value:/^\+966[5][0-9]{8}$/,message:"Please enter a valid Saudi mobile number"}}),disabled:e,className:"text-base",autoFocus:!0}),j.phone&&s.jsx("p",{className:"text-sm text-destructive",children:j.phone.message}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Use your Saudi mobile number (e.g., +966 5XXXXXXX)"})]}),s.jsx(n.z,{type:"submit",className:"w-full",disabled:e,children:e?(0,s.jsxs)(s.Fragment,{children:[s.jsx($.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending OTP..."]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(_.Z,{className:"mr-2 h-4 w-4"}),"Continue with Phone"]})})]})}),s.jsx(M,{value:"google",className:"space-y-4 mt-6",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Sign in quickly with your Google account"}),s.jsx(n.z,{onClick:S,disabled:r,className:"w-full",variant:"outline",children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx($.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Connecting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]})})]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsx("p",{className:"text-xs text-muted-foreground",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})})]})]})})}},2643:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>n,SZ:()=>d,Zb:()=>o,aY:()=>c,eW:()=>u,ll:()=>l});var s=r(326),a=r(7577),i=r(7863);let o=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let n=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},4432:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var s=r(326),a=r(7577),i=r(7863);let o=a.forwardRef(({className:e,type:t,...r},a)=>s.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));o.displayName="Input"},1048:(e,t,r)=>{"use strict";r.d(t,{_:()=>d});var s=r(326),a=r(7577),i=r(4478),o=r(9360),n=r(7863);let l=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},r)=>s.jsx(i.f,{ref:r,className:(0,n.cn)(l(),e),...t}));d.displayName=i.f.displayName},6824:(e,t,r)=>{"use strict";async function s(e,t={}){let r=function(e){let t=e.startsWith("/")?e.slice(1):e;return`https://storybook-backend-production-cb71.up.railway.app/${t}`}(e),s={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(r,s);if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||`HTTP ${e.status}: ${e.statusText}`)}return await e.json()}catch(t){throw console.error(`API request failed for ${e}:`,t),t}}r.d(t,{hi:()=>a});let a={sendOTP:e=>s("api/send-otp",{method:"POST",body:JSON.stringify({phone:e})}),verifyOTP:(e,t)=>s("api/verify-otp",{method:"POST",body:JSON.stringify({phone:e,otp_code:t})}),uploadImage:e=>s("api/upload-image",{method:"POST",body:e,headers:{}}),describeImage:e=>s("api/image/describe",{method:"POST",body:JSON.stringify({imageUrl:e})}),cartoonizeImage:(e,t,r)=>s("api/image/cartoonize",{method:"POST",body:JSON.stringify({prompt:e,style:t,imageUrl:r})}),generateScenes:(e,t,r)=>s("api/story/generate-scenes",{method:"POST",body:JSON.stringify({story:e,characterImage:t,audience:r})}),generateAutoStory:e=>s("api/story/generate-auto-story",{method:"POST",body:JSON.stringify(e)}),createStorybook:e=>s("api/story/create-storybook",{method:"POST",body:JSON.stringify(e)}),generateCartoonImage:e=>s("api/story/generate-cartoon-image",{method:"POST",body:JSON.stringify({image_prompt:e})}),getUserStorybooks:e=>s("api/story/get-user-storybooks",{headers:{Authorization:`Bearer ${e}`}}),getUserStorybookById:(e,t)=>s(`api/story/get-user-storybook-by-id?id=${e}`,{headers:{Authorization:`Bearer ${t}`}}),deleteStorybookById:(e,t)=>s(`api/story/delete-by-id?id=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),requestPrint:(e,t)=>s("api/story/request-print",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify({storybook_id:e})}),startAutoStoryJob:e=>s("api/jobs/auto-story/start",{method:"POST",body:JSON.stringify(e)}),startScenesJob:e=>s("api/jobs/scenes/start",{method:"POST",body:JSON.stringify(e)}),startStorybookJob:e=>s("api/jobs/storybook/start",{method:"POST",body:JSON.stringify(e)}),getUserJobs:e=>s("api/jobs/user",{headers:{Authorization:`Bearer ${e}`}}),cancelJob:e=>s(`api/jobs/cancel/${e}`,{method:"POST"}),deleteJob:(e,t)=>s(`api/jobs/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})}},2945:(e,t,r)=>{"use strict";r.d(t,{x:()=>i});var s=r(8655);let a=null;function i(){return a||(a=(0,s.AY)("https://nzkwrrinpweiqcnzeric.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im56a3dycmlucHdlaXFjbnplcmljIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDY2MTE3NjYsImV4cCI6MjA2MjE4Nzc2Nn0.6KOABidPThLpLfw_YSKvK8YYwF1srRlaFyczTiRF0i8")),a}},2887:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(2881).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},430:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/home/project/app/auth/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[759,655,707,474],()=>r(4703));module.exports=s})();