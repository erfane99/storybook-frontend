(()=>{var e={};e.id=145,e.ids=[145],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4259:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>l}),r(4718),r(5931),r(5866);var s=r(3191),a=r(8716),i=r(7922),o=r.n(i),n=r(5231),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(t,d);let l=["",{children:["verify-registration",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4718)),"/home/project/app/verify-registration/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5931)),"/home/project/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/project/app/verify-registration/page.tsx"],m="/verify-registration/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/verify-registration/page",pathname:"/verify-registration",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},7680:(e,t,r)=>{Promise.resolve().then(r.bind(r,7178))},7178:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(326),a=r(7577),i=r(5047),o=r(4723),n=r(772),d=r(4432),l=r(1048),c=r(2643),m=r(4215),p=r(165),u=r(7506),f=r(6333),h=r(6824);function y(){let[e,t]=(0,a.useState)(!1),[r,y]=(0,a.useState)(!1),x=(0,i.useRouter)(),g=(0,i.useSearchParams)(),{toast:b}=(0,m.pm)(),j=g.get("phone"),{register:v,handleSubmit:N,formState:{errors:S},watch:P}=(0,o.cI)(),w=P("otp_code"),O=async e=>{if(j){t(!0);try{await h.hi.verifyOTP(j,e.otp_code),b({title:"Success",description:"Account created successfully!"}),x.push("/")}catch(e){b({variant:"destructive",title:"Verification Failed",description:e.message||"Invalid verification code"})}finally{t(!1)}}},T=async()=>{if(j){y(!0);try{await h.hi.sendOTP(j),b({title:"OTP Resent",description:"A new verification code has been sent to your phone."})}catch(e){b({variant:"destructive",title:"Error",description:e.message||"Failed to resend OTP"})}finally{y(!1)}}};return j?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:(0,s.jsxs)(c.Zb,{className:"w-full max-w-md",children:[(0,s.jsxs)(c.Ol,{className:"text-center",children:[s.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-4",children:s.jsx(p.Z,{className:"h-6 w-6 text-primary"})}),s.jsx(c.ll,{className:"text-2xl font-bold",children:"Verify Your Phone"}),(0,s.jsxs)(c.SZ,{children:["Enter the 6-digit code sent to"," ",s.jsx("span",{className:"font-medium",children:j})]})]}),(0,s.jsxs)(c.aY,{children:[(0,s.jsxs)("form",{onSubmit:N(O),className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(l._,{htmlFor:"otp_code",children:"Verification Code"}),s.jsx(d.I,{id:"otp_code",type:"text",placeholder:"123456",maxLength:6,...v("otp_code",{required:"Verification code is required",pattern:{value:/^\d{6}$/,message:"Please enter a valid 6-digit code"}}),disabled:e,className:"text-center text-2xl tracking-widest font-mono",autoComplete:"one-time-code"}),S.otp_code&&s.jsx("p",{className:"text-sm text-destructive",children:S.otp_code.message})]}),s.jsx(n.z,{type:"submit",className:"w-full",disabled:e||!w||6!==w.length,children:e?(0,s.jsxs)(s.Fragment,{children:[s.jsx(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify & Create Account"})]}),(0,s.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Didn't receive the code?"}),s.jsx(n.z,{variant:"outline",onClick:T,disabled:r,className:"w-full",children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Resending..."]}):"Resend Code"})]}),s.jsx("div",{className:"text-center",children:(0,s.jsxs)(n.z,{variant:"ghost",onClick:()=>x.push("/register"),className:"text-sm",children:[s.jsx(f.Z,{className:"mr-2 h-4 w-4"}),"Back to Registration"]})})]})]})]})}):null}function x(){return s.jsx(a.Suspense,{fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsx(u.Z,{className:"h-8 w-8 animate-spin"})}),children:s.jsx(y,{})})}},2643:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>n,SZ:()=>l,Zb:()=>o,aY:()=>c,eW:()=>m,ll:()=>d});var s=r(326),a=r(7577),i=r(7863);let o=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));o.displayName="Card";let n=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));n.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));l.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let m=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));m.displayName="CardFooter"},4432:(e,t,r)=>{"use strict";r.d(t,{I:()=>o});var s=r(326),a=r(7577),i=r(7863);let o=a.forwardRef(({className:e,type:t,...r},a)=>s.jsx("input",{type:t,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));o.displayName="Input"},1048:(e,t,r)=>{"use strict";r.d(t,{_:()=>l});var s=r(326),a=r(7577),i=r(4478),o=r(9360),n=r(7863);let d=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=a.forwardRef(({className:e,...t},r)=>s.jsx(i.f,{ref:r,className:(0,n.cn)(d(),e),...t}));l.displayName=i.f.displayName},6824:(e,t,r)=>{"use strict";async function s(e,t={}){let r=function(e){let t=e.startsWith("/")?e.slice(1):e;return`https://storybook-backend-production-cb71.up.railway.app/${t}`}(e),s={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(r,s);if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||`HTTP ${e.status}: ${e.statusText}`)}return await e.json()}catch(t){throw console.error(`API request failed for ${e}:`,t),t}}r.d(t,{hi:()=>a});let a={sendOTP:e=>s("api/send-otp",{method:"POST",body:JSON.stringify({phone:e})}),verifyOTP:(e,t)=>s("api/verify-otp",{method:"POST",body:JSON.stringify({phone:e,otp_code:t})}),uploadImage:e=>s("api/upload-image",{method:"POST",body:e,headers:{}}),describeImage:e=>s("api/image/describe",{method:"POST",body:JSON.stringify({imageUrl:e})}),cartoonizeImage:(e,t,r)=>s("api/image/cartoonize",{method:"POST",body:JSON.stringify({prompt:e,style:t,imageUrl:r})}),generateScenes:(e,t,r)=>s("api/story/generate-scenes",{method:"POST",body:JSON.stringify({story:e,characterImage:t,audience:r})}),generateAutoStory:e=>s("api/story/generate-auto-story",{method:"POST",body:JSON.stringify(e)}),createStorybook:e=>s("api/story/create-storybook",{method:"POST",body:JSON.stringify(e)}),generateCartoonImage:e=>s("api/story/generate-cartoon-image",{method:"POST",body:JSON.stringify({image_prompt:e})}),getUserStorybooks:e=>s("api/story/get-user-storybooks",{headers:{Authorization:`Bearer ${e}`}}),getUserStorybookById:(e,t)=>s(`api/story/get-user-storybook-by-id?id=${e}`,{headers:{Authorization:`Bearer ${t}`}}),deleteStorybookById:(e,t)=>s(`api/story/delete-by-id?id=${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}}),requestPrint:(e,t)=>s("api/story/request-print",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify({storybook_id:e})}),startAutoStoryJob:e=>s("api/jobs/auto-story/start",{method:"POST",body:JSON.stringify(e)}),startScenesJob:e=>s("api/jobs/scenes/start",{method:"POST",body:JSON.stringify(e)}),startStorybookJob:e=>s("api/jobs/storybook/start",{method:"POST",body:JSON.stringify(e)}),getUserJobs:e=>s("api/jobs/user",{headers:{Authorization:`Bearer ${e}`}}),cancelJob:e=>s(`api/jobs/cancel/${e}`,{method:"POST"}),deleteJob:(e,t)=>s(`api/jobs/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})}},6333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},165:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(2881).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},4718:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/home/project/app/verify-registration/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[759,707,474],()=>r(4259));module.exports=s})();