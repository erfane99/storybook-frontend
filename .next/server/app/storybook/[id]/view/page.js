(()=>{var e={};e.id=811;e.ids=[811];e.modules={121:(e,r,o)=>{Promise.resolve().then(o.bind(o,1730))},288:(e,r,o)=>{"use strict";o.r(r);o.d(r,{"default":()=>l,metadata:()=>d});var n=o(2004);var t=o.n(n);var s=o(327);var i=o.n(s);var a=o(4925);var c=o.n(a);Object(function e(){var e=new Error("Cannot find module '@/lib/utils'");e.code="MODULE_NOT_FOUND";throw e}());Object(function e(){var e=new Error("Cannot find module '@/app/_components/root-client-wrapper'");e.code="MODULE_NOT_FOUND";throw e}());const d={title:"StoryCanvas - AI Storybook Generator",description:"Create beautiful cartoon storybooks with AI using your own images",keywords:["AI","storybook","children","cartoon","generator","DALL-E","OpenAI"],viewport:"width=device-width, initial-scale=1, maximum-scale=1"};function l({children:e}){return(0,n.jsxs)("html",{lang:"en",suppressHydrationWarning:true,className:Object(function e(){var e=new Error("Cannot find module '@/lib/utils'");e.code="MODULE_NOT_FOUND";throw e}())("antialiased",c().variable),children:[(0,n.jsx)("head",{}),(0,n.jsx)("body",{className:"min-h-screen bg-background font-sans",children:(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/app/_components/root-client-wrapper'");e.code="MODULE_NOT_FOUND";throw e}()),{children:e})})]})}},327:()=>{},393:(e,r,o)=>{Promise.resolve().then(o.bind(o,2896))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1730:(e,r,o)=>{"use strict";o.r(r);o.d(r,{"default":()=>s});var n=o(5736);var t=o.n(n);const s=(0,n.registerClientReference)(function(){throw new Error("Attempted to call the default export of \"/home/project/app/storybook/[id]/view/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/project/app/storybook/[id]/view/page.tsx","default")},2695:()=>{},2879:(e,r,o)=>{Promise.resolve().then(o.t.bind(o,889,23));Promise.resolve().then(o.t.bind(o,9921,23));Promise.resolve().then(o.t.bind(o,7849,23));Promise.resolve().then(o.t.bind(o,840,23));Promise.resolve().then(o.t.bind(o,7416,23));Promise.resolve().then(o.t.bind(o,6924,23));Promise.resolve().then(o.t.bind(o,8738,23));Promise.resolve().then(o.t.bind(o,8780,23))},2896:(e,r,o)=>{"use strict";o.r(r);o.d(r,{"default":()=>d});var n=o(1718);var t=o.n(n);var s=o(4743);var i=o.n(s);var a=o(7664);Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}());Object(function e(){var e=new Error("Cannot find module '@/components/ui/button'");e.code="MODULE_NOT_FOUND";throw e}());Object(function e(){var e=new Error("Cannot find module '@/components/ui/skeleton'");e.code="MODULE_NOT_FOUND";throw e}());Object(function e(){var e=new Error("Cannot find module '@/hooks/use-toast'");e.code="MODULE_NOT_FOUND";throw e}());Object(function e(){var e=new Error("Cannot find module '@/contexts/auth-context'");e.code="MODULE_NOT_FOUND";throw e}());Object(function e(){var e=new Error("Cannot find module '__barrel_optimize__?names=ArrowLeft,Download,Lock,Share2!=!lucide-react'");e.code="MODULE_NOT_FOUND";throw e}());Object(function e(){var e=new Error("Cannot find module '@/lib/supabase/client'");e.code="MODULE_NOT_FOUND";throw e}());Object(function e(){var e=new Error("Cannot find module '@/lib/api'");e.code="MODULE_NOT_FOUND";throw e}());const c={children:"For Children",young_adults:"For Young Adults",adults:"For Adults"};function d(){const e=(0,a.useParams)();const r=(0,a.useRouter)();const{user:o,profile:t}=Object(function e(){var e=new Error("Cannot find module '@/contexts/auth-context'");e.code="MODULE_NOT_FOUND";throw e}())();const{toast:i}=Object(function e(){var e=new Error("Cannot find module '@/hooks/use-toast'");e.code="MODULE_NOT_FOUND";throw e}())();const[d,l]=(0,s.useState)(null);const[u,m]=(0,s.useState)(true);const h=Object(function e(){var e=new Error("Cannot find module '@/lib/supabase/client'");e.code="MODULE_NOT_FOUND";throw e}())();process.env.__NEXT_PRIVATE_MINIMIZE_MACRO_FALSE&&(0,s.useEffect)(()=>{if(!o){r.push("/auth/login");return}if(!o.email_confirmed_at){r.push("/auth/verify");return}async function n(){try{const{data:{session:r}}=await h.auth.getSession();if(!r?.access_token){throw new Error("No access token available")}const{storybook:o}=await Object(function e(){var e=new Error("Cannot find module '@/lib/api'");e.code="MODULE_NOT_FOUND";throw e}()).getUserStorybookById(e.id,r.access_token);l(o)}catch(e){i({variant:"destructive",title:"Error",description:e.message||"Failed to load storybook"})}finally{m(false)}}n()},[o,e.id,r,h,i]);const O=async()=>{if(!o?.email_confirmed_at){r.push("/auth/verify");return}if(t?.onboarding_step!=="paid"){return}try{const e=`${window.location.origin}/storybook/${d?.id}/view`;await navigator.clipboard.writeText(e);i({title:"Link copied",description:"Share link copied to clipboard"})}catch(e){i({variant:"destructive",title:"Error",description:"Failed to copy share link"})}};const p=()=>{if(!o?.email_confirmed_at){r.push("/auth/verify");return}if(t?.onboarding_step!=="paid"){return}i({title:"Download started",description:"Your storybook will be downloaded shortly"})};if(!o){return null}const f=e=>{switch(e){case 1:return"grid-cols-1";case 2:return"grid-cols-1 sm:grid-cols-2";case 3:return"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3";default:return"grid-cols-1"}};return(0,n.jsx)("div",{className:"min-h-screen bg-background py-12",children:(0,n.jsxs)("div",{className:"container max-w-7xl",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/button'");e.code="MODULE_NOT_FOUND";throw e}()),{variant:"ghost",onClick:()=>r.push("/storybook/library"),children:[(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '__barrel_optimize__?names=ArrowLeft,Download,Lock,Share2!=!lucide-react'");e.code="MODULE_NOT_FOUND";throw e}()),{className:"h-4 w-4 mr-2"}),"Back to Library"]}),u?(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/skeleton'");e.code="MODULE_NOT_FOUND";throw e}()),{className:"h-8 w-64"}):(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-4xl font-bold",children:d?.title}),(0,n.jsx)("div",{className:"flex items-center gap-2 mt-2 text-sm text-muted-foreground",children:(0,n.jsx)("span",{children:c[d?.audience||"children"]})})]})]}),!u&&d&&(0,n.jsx)("div",{className:"flex items-center gap-2",children:t?.onboarding_step==="paid"?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/button'");e.code="MODULE_NOT_FOUND";throw e}()),{variant:"outline",onClick:O,children:[(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '__barrel_optimize__?names=ArrowLeft,Download,Lock,Share2!=!lucide-react'");e.code="MODULE_NOT_FOUND";throw e}()),{className:"h-4 w-4 mr-2"}),"Share"]}),(0,n.jsxs)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/button'");e.code="MODULE_NOT_FOUND";throw e}()),{variant:"outline",onClick:p,children:[(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '__barrel_optimize__?names=ArrowLeft,Download,Lock,Share2!=!lucide-react'");e.code="MODULE_NOT_FOUND";throw e}()),{className:"h-4 w-4 mr-2"}),"Download"]})]}):(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{className:"p-4 bg-muted",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '__barrel_optimize__?names=ArrowLeft,Download,Lock,Share2!=!lucide-react'");e.code="MODULE_NOT_FOUND";throw e}()),{className:"h-5 w-5 text-muted-foreground"}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("p",{className:"text-sm font-medium",children:"Unlock sharing and downloading"}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"Purchase this storybook to access all features"})]}),(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/button'");e.code="MODULE_NOT_FOUND";throw e}()),{variant:"default",className:"ml-4",children:"Unlock Now"})]})})})]}),u?(0,n.jsx)("div",{className:"space-y-8",children:[1,2,3].map(e=>(0,n.jsxs)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:[(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/skeleton'");e.code="MODULE_NOT_FOUND";throw e}()),{className:"h-6 w-32"})}),(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[1,2].map(e=>(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/skeleton'");e.code="MODULE_NOT_FOUND";throw e}()),{className:"h-64"},e))})})]},e))}):d?(0,n.jsxs)("div",{className:"space-y-12",children:[d.character_description&&(0,n.jsxs)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:[(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:"Main Character"})}),(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:(0,n.jsx)("p",{className:"text-muted-foreground",children:d.character_description})})]}),d.pages.map((e,r)=>(0,n.jsxs)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:[(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:(0,n.jsxs)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:["Page ",r+1]})}),(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:(0,n.jsx)("div",{className:`grid ${f(e.scenes.length)} gap-6`,children:e.scenes.map((e,r)=>(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"aspect-video relative rounded-lg overflow-hidden",children:(0,n.jsx)("img",{src:e.generatedImage,alt:`Scene ${r+1}`,className:"absolute inset-0 w-full h-full object-cover"})}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("p",{className:"text-lg",children:e.description}),(0,n.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Emotion: ",e.emotion]})]})]},r))})})]},r))]}):(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{children:(0,n.jsx)(Object(function e(){var e=new Error("Cannot find module '@/components/ui/card'");e.code="MODULE_NOT_FOUND";throw e}()),{className:"py-8 text-center",children:(0,n.jsx)("p",{className:"text-muted-foreground",children:"Storybook not found"})})})]})})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4447:()=>{},6087:(e,r,o)=>{Promise.resolve().then(o.t.bind(o,2163,23));Promise.resolve().then(o.t.bind(o,8655,23));Promise.resolve().then(o.t.bind(o,2947,23));Promise.resolve().then(o.t.bind(o,4226,23));Promise.resolve().then(o.t.bind(o,7558,23));Promise.resolve().then(o.t.bind(o,5514,23));Promise.resolve().then(o.t.bind(o,6096,23));Promise.resolve().then(o.t.bind(o,2418,23))},6279:(e,r,o)=>{"use strict";o.r(r);o.d(r,{GlobalError:()=>a.a,__next_app__:()=>b,pages:()=>v,routeModule:()=>N,tree:()=>f});var n=o(3700);var t=o.n(n);var s=o(6123);var i=o(2947);var a=o.n(i);var c=o(1020);var d=o.n(c);var l={};for(const e in c)if(["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)<0)l[e]=()=>c[e];o.d(r,l);const u=()=>Promise.resolve().then(o.bind(o,288));const m=()=>Promise.resolve().then(o.t.bind(o,1809,23));const h=()=>Promise.resolve().then(o.t.bind(o,8796,23));const O=()=>Promise.resolve().then(o.t.bind(o,3837,23));const p=()=>Promise.resolve().then(o.bind(o,1730));const f={children:["",{children:["storybook",{children:["[id]",{children:["view",{children:["__PAGE__",{},{page:[p,"/home/project/app/storybook/[id]/view/page.tsx"]}]},{}]},{}]},{}]},{"layout":[u,"/home/project/app/layout.tsx"],"not-found":[m,"next/dist/client/components/not-found-error"],"forbidden":[h,"next/dist/client/components/forbidden-error"],"unauthorized":[O,"next/dist/client/components/unauthorized-error"]}]}.children;const v=["/home/project/app/storybook/[id]/view/page.tsx"];const _=o;const w=()=>Promise.resolve();const b={require:_,loadChunk:w};const N=new n.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/storybook/[id]/view/page",pathname:"/storybook/[id]/view",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:f}})},7664:(e,r,o)=>{"use strict";var n=o(6596);var t=o.n(n);if(o.o(n,"useParams"))o.d(r,{useParams:function(){return n.useParams}});if(o.o(n,"useRouter"))o.d(r,{useRouter:function(){return n.useRouter}});if(o.o(n,"useSearchParams"))o.d(r,{useSearchParams:function(){return n.useSearchParams}})},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../../webpack-runtime.js");r.C(e);var o=e=>r(r.s=e);var n=r.X(0,[987],()=>o(6279));module.exports=n})();