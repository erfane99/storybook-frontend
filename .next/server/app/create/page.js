(()=>{var e={};e.id=572,e.ids=[572],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},8216:e=>{"use strict";e.exports=require("net")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},2452:e=>{"use strict";e.exports=require("tls")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},7743:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(646),r(5931),r(5866);var s=r(3191),a=r(8716),l=r(7922),i=r.n(l),n=r(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let c=["",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,646)),"/home/project/app/create/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5931)),"/home/project/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/project/app/create/page.tsx"],u="/create/page",m={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/create/page",pathname:"/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3238:(e,t,r)=>{Promise.resolve().then(r.bind(r,3835))},3835:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eX});var s=r(326),a=r(7577),l=r(5047),i=r(772),n=r(2643),o=r(6333),c=r(2881);let d=(0,c.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var u=r(7506),m=r(4432),h=r(1048);function p({value:e,onChange:t}){return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Step 1: Story Title"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Enter the title of your story. Make it fun and memorable!"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(h._,{htmlFor:"title",children:"Story Title"}),s.jsx(m.I,{id:"title",placeholder:"Enter your story title",value:e,onChange:e=>t(e.target.value),className:"max-w-xl",autoFocus:!0}),!e.trim()&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"Please enter a title to continue"})]})]})}var x=r(2561),f=r(8051),g=r(3095),y=r(2067),b=r(3405),j=r(2566),v=r(5226),N="Switch",[w,k]=(0,g.b)(N),[C,S]=w(N),R=a.forwardRef((e,t)=>{let{__scopeSwitch:r,name:l,checked:i,defaultChecked:n,required:o,disabled:c,value:d="on",onCheckedChange:u,form:m,...h}=e,[p,g]=a.useState(null),b=(0,f.e)(t,e=>g(e)),j=a.useRef(!1),w=!p||m||!!p.closest("form"),[k,S]=(0,y.T)({prop:i,defaultProp:n??!1,onChange:u,caller:N});return(0,s.jsxs)(C,{scope:r,checked:k,disabled:c,children:[(0,s.jsx)(v.WV.button,{type:"button",role:"switch","aria-checked":k,"aria-required":o,"data-state":E(k),"data-disabled":c?"":void 0,disabled:c,value:d,...h,ref:b,onClick:(0,x.M)(e.onClick,e=>{S(e=>!e),w&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),w&&(0,s.jsx)(I,{control:p,bubbles:!j.current,name:l,value:d,checked:k,required:o,disabled:c,form:m,style:{transform:"translateX(-100%)"}})]})});R.displayName=N;var M="SwitchThumb",P=a.forwardRef((e,t)=>{let{__scopeSwitch:r,...a}=e,l=S(M,r);return(0,s.jsx)(v.WV.span,{"data-state":E(l.checked),"data-disabled":l.disabled?"":void 0,...a,ref:t})});P.displayName=M;var I=a.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:l=!0,...i},n)=>{let o=a.useRef(null),c=(0,f.e)(o,n),d=(0,b.D)(r),u=(0,j.t)(t);return a.useEffect(()=>{let e=o.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==r&&t){let s=new Event("click",{bubbles:l});t.call(e,r),e.dispatchEvent(s)}},[d,r,l]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:c,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function E(e){return e?"checked":"unchecked"}I.displayName="SwitchBubbleInput";var Z=r(7863);let z=a.forwardRef(({className:e,...t},r)=>s.jsx(R,{className:(0,Z.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(P,{className:(0,Z.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));z.displayName=R.displayName;var q=r(4215);let A=(0,c.Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),U=(0,c.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var _=r(4019),Y=r(2945),F=r(6824);function T({formData:e,updateFormData:t}){let[r,l]=(0,a.useState)(!1),[o,c]=(0,a.useState)([]),[d,m]=(0,a.useState)(!1),{toast:p}=(0,q.pm)();(0,Y.x)();let x=async e=>{if(!e.target.files?.length)return;let r=e.target.files[0];m(!0);try{let e=new FormData;e.append("image",r);let{secure_url:s}=await F.hi.uploadImage(e);t({characterImage:r,imageUrl:s}),p({title:"Success",description:"Image uploaded successfully"})}catch(e){p({variant:"destructive",title:"Error",description:e.message||"Failed to upload image"})}finally{m(!1)}},f=e=>{t({imageUrl:e.original_url,cartoonizedUrl:e.generated_url})};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Upload a Character Image"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Upload a photo of your character or choose from your previous images."})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(z,{checked:r,onCheckedChange:l,id:"use-previous"}),(0,s.jsxs)(h._,{htmlFor:"use-previous",className:"cursor-pointer",children:[s.jsx(A,{className:"h-4 w-4 inline mr-2"}),"Use a previous image"]})]}),r?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:o.map((t,r)=>s.jsx(n.Zb,{className:`cursor-pointer transition-all ${e.imageUrl===t.original_url?"ring-2 ring-primary":""}`,onClick:()=>f(t),children:s.jsx(n.aY,{className:"p-4",children:s.jsx("div",{className:"aspect-square relative rounded overflow-hidden",children:s.jsx("img",{src:t.original_url,alt:`Previous image ${r+1}`,className:"absolute inset-0 w-full h-full object-cover"})})})},r))}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("label",{className:"flex flex-col items-center justify-center h-48 border-2 border-dashed rounded-lg cursor-pointer hover:bg-secondary/50",children:[d?s.jsx(u.Z,{className:"h-8 w-8 animate-spin text-muted-foreground"}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(U,{className:"h-8 w-8 mb-2 text-muted-foreground"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Click to upload an image"})]}),s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:x,disabled:d})]}),e.imageUrl&&s.jsx(n.Zb,{children:(0,s.jsxs)(n.aY,{className:"p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h4",{className:"font-medium",children:"Selected Image"}),s.jsx(i.z,{variant:"ghost",size:"sm",onClick:()=>{t({characterImage:null,imageUrl:void 0,cartoonizedUrl:void 0})},children:s.jsx(_.Z,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"aspect-video relative rounded overflow-hidden",children:s.jsx("img",{src:e.imageUrl,alt:"Selected character",className:"absolute inset-0 w-full h-full object-cover"})})]})})]})]})}var $=r(5594),G=r(7124),D=r(9815),L="Radio",[O,V]=(0,g.b)(L),[H,B]=O(L),W=a.forwardRef((e,t)=>{let{__scopeRadio:r,name:l,checked:i=!1,required:n,disabled:o,value:c="on",onCheck:d,form:u,...m}=e,[h,p]=a.useState(null),g=(0,f.e)(t,e=>p(e)),y=a.useRef(!1),b=!h||u||!!h.closest("form");return(0,s.jsxs)(H,{scope:r,checked:i,disabled:o,children:[(0,s.jsx)(v.WV.button,{type:"button",role:"radio","aria-checked":i,"data-state":Q(i),"data-disabled":o?"":void 0,disabled:o,value:c,...m,ref:g,onClick:(0,x.M)(e.onClick,e=>{i||d?.(),b&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),b&&(0,s.jsx)(K,{control:h,bubbles:!y.current,name:l,value:c,checked:i,required:n,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});W.displayName=L;var J="RadioIndicator",X=a.forwardRef((e,t)=>{let{__scopeRadio:r,forceMount:a,...l}=e,i=B(J,r);return(0,s.jsx)(D.z,{present:a||i.checked,children:(0,s.jsx)(v.WV.span,{"data-state":Q(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:t})})});X.displayName=J;var K=a.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:l=!0,...i},n)=>{let o=a.useRef(null),c=(0,f.e)(o,n),d=(0,b.D)(r),u=(0,j.t)(t);return a.useEffect(()=>{let e=o.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==r&&t){let s=new Event("click",{bubbles:l});t.call(e,r),e.dispatchEvent(s)}},[d,r,l]),(0,s.jsx)(v.WV.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:c,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function Q(e){return e?"checked":"unchecked"}K.displayName="RadioBubbleInput";var ee=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],et="RadioGroup",[er,es]=(0,g.b)(et,[$.Pc,V]),ea=(0,$.Pc)(),el=V(),[ei,en]=er(et),eo=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,name:a,defaultValue:l,value:i,required:n=!1,disabled:o=!1,orientation:c,dir:d,loop:u=!0,onValueChange:m,...h}=e,p=ea(r),x=(0,G.gm)(d),[f,g]=(0,y.T)({prop:i,defaultProp:l??null,onChange:m,caller:et});return(0,s.jsx)(ei,{scope:r,name:a,required:n,disabled:o,value:f,onValueChange:g,children:(0,s.jsx)($.fC,{asChild:!0,...p,orientation:c,dir:x,loop:u,children:(0,s.jsx)(v.WV.div,{role:"radiogroup","aria-required":n,"aria-orientation":c,"data-disabled":o?"":void 0,dir:x,...h,ref:t})})})});eo.displayName=et;var ec="RadioGroupItem",ed=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,disabled:l,...i}=e,n=en(ec,r),o=n.disabled||l,c=ea(r),d=el(r),u=a.useRef(null),m=(0,f.e)(t,u),h=n.value===i.value,p=a.useRef(!1);return a.useEffect(()=>{let e=e=>{ee.includes(e.key)&&(p.current=!0)},t=()=>p.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,s.jsx)($.ck,{asChild:!0,...c,focusable:!o,active:h,children:(0,s.jsx)(W,{disabled:o,required:n.required,checked:h,...d,...i,name:n.name,ref:m,onCheck:()=>n.onValueChange(i.value),onKeyDown:(0,x.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,x.M)(i.onFocus,()=>{p.current&&u.current?.click()})})})});ed.displayName=ec;var eu=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,...a}=e,l=el(r);return(0,s.jsx)(X,{...l,...a,ref:t})});eu.displayName="RadioGroupIndicator";var em=r(3982);let eh=a.forwardRef(({className:e,...t},r)=>s.jsx(eo,{className:(0,Z.cn)("grid gap-2",e),...t,ref:r}));eh.displayName=eo.displayName;let ep=a.forwardRef(({className:e,...t},r)=>s.jsx(ed,{ref:r,className:(0,Z.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(eu,{className:"flex items-center justify-center",children:s.jsx(em.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ep.displayName=ed.displayName;let ex=[{value:"storybook",label:"Storybook",description:"Soft, whimsical style with gentle colors and clean lines"},{value:"semi-realistic",label:"Semi-Realistic",description:"Balanced style with smooth shading and accurate details"},{value:"comic-book",label:"Comic Book",description:"Bold lines and dynamic shading inspired by comic books"},{value:"flat-illustration",label:"Flat Illustration",description:"Modern minimal style with clean vector lines"},{value:"anime",label:"Anime",description:"Japanese animation style with expressive features"}];function ef({value:e,onChange:t}){return(0,s.jsxs)("div",{className:"px-2 md:px-4 space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Choose Art Style"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Select the artistic style for your character illustrations."})]}),s.jsx(eh,{value:e,onValueChange:t,className:"grid grid-cols-1 gap-4",children:ex.map(t=>s.jsx(n.Zb,{className:`cursor-pointer transition-all hover:shadow-md ${e===t.value?"ring-2 ring-primary":""}`,children:s.jsx(n.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx(ep,{value:t.value,id:t.value,className:"mt-1"}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx(h._,{htmlFor:t.value,className:"font-medium text-lg cursor-pointer",children:t.label}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]})]})})},t.value))})]})}var eg=r(1405);function ey({imageUrl:e,cartoonStyle:t,cartoonizedUrl:r,updateFormData:l}){let[o,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(0),[h,p]=(0,a.useState)(null),[x,f]=(0,a.useState)(null),{toast:g}=(0,q.pm)(),y=async()=>{c(!0),p(null);try{let r=x;if(!r){let{characterDescription:t}=await F.hi.describeImage(e);r=t,f(t)}let{url:s}=await F.hi.cartoonizeImage(r,t,e);l({cartoonizedUrl:s})}catch(e){p(e.message),g({variant:"destructive",title:"Error",description:e.message||"Failed to generate cartoon image"})}finally{c(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Review Cartoon Image"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Make sure you're happy with your cartoon image before continuing. You can retry up to 3 times."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx(n.Zb,{children:(0,s.jsxs)(n.aY,{className:"p-4",children:[s.jsx("div",{className:"aspect-square relative rounded-lg overflow-hidden",children:s.jsx("img",{src:e,alt:"Original",className:"absolute inset-0 w-full h-full object-cover"})}),s.jsx("p",{className:"text-center text-sm mt-2 text-muted-foreground",children:"Original"})]})}),s.jsx(n.Zb,{children:(0,s.jsxs)(n.aY,{className:"p-4",children:[s.jsx("div",{className:"aspect-square relative rounded-lg overflow-hidden",children:o?s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50",children:s.jsx(u.Z,{className:"h-8 w-8 animate-spin"})}):r?s.jsx("img",{src:r,alt:"Cartoon",className:"absolute inset-0 w-full h-full object-cover"}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50",children:s.jsx("p",{className:"text-muted-foreground",children:"Generating cartoon image..."})})}),s.jsx("p",{className:"text-center text-sm mt-2 text-muted-foreground",children:"Cartoon"})]})})]}),s.jsx("div",{className:"flex justify-between items-center pt-4",children:(0,s.jsxs)(i.z,{variant:"outline",onClick:()=>{d>=3||(m(e=>e+1),y())},disabled:d>=3||o,className:"flex items-center",children:[s.jsx(eg.Z,{className:"mr-2 h-4 w-4"}),"Regenerate Image",d>0&&(0,s.jsxs)("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",3-d," tries left)"]})]})}),h&&s.jsx("p",{className:"text-sm text-destructive text-center",children:h})]})}let eb=(0,c.Z)("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]),ej=(0,c.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ev=[{value:"children",label:"Children",description:"Simple language, colorful illustrations, and positive themes",icon:eb},{value:"young_adults",label:"Young Adults",description:"More complex themes, dynamic illustrations, and engaging narratives",icon:ej},{value:"adults",label:"Adults",description:"Sophisticated themes, detailed artwork, and mature storytelling",icon:r(9635).Z}];function eN({value:e,onChange:t}){return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Select Target Audience"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Choose who your story is primarily written for. This will affect the style and complexity."})]}),s.jsx(eh,{value:e,onValueChange:e=>t(e),className:"space-y-4",children:ev.map(t=>{let r=t.icon;return s.jsx(n.Zb,{className:`cursor-pointer transition-all hover:shadow-md ${e===t.value?"ring-2 ring-primary":""}`,children:s.jsx(n.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx(ep,{value:t.value,id:t.value,className:"mt-1"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(r,{className:"h-5 w-5"}),s.jsx(h._,{htmlFor:t.value,className:"font-medium text-lg cursor-pointer",children:t.label})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.description})]})]})})},t.value)})})]})}let ew=a.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:(0,Z.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ew.displayName="Textarea";let ek=(0,c.Z)("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);var eC=r(2607),eS=r(1572);let eR=(0,c.Z)("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),eM=(0,c.Z)("PencilLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}],["path",{d:"m15 5 3 3",key:"1w25hb"}]]);var eP=r(4527);let eI=[{value:"adventure",label:"Adventure",description:"An exciting journey filled with challenges and discoveries",icon:ek,audience:"all"},{value:"siblings",label:"Playing with Siblings",description:"Fun stories about family bonding and sharing",icon:ej,audience:"children"},{value:"bedtime",label:"Going to Sleep",description:"Calming bedtime stories for peaceful nights",icon:eC.Z,audience:"children"},{value:"fantasy",label:"Fantasy/Sci-Fi",description:"Magical worlds and futuristic adventures",icon:eS.Z,audience:"all"},{value:"history",label:"History",description:"Educational stories from the past",icon:eR,audience:"all"}];function eE({value:e,onChange:t,storyMode:r,selectedGenre:a,onModeChange:l,onGenreChange:i}){return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Write Your Story"}),s.jsx("p",{className:"text-muted-foreground mb-4",children:"Choose how you'd like to create your story - write it yourself or let our AI help you!"})]}),(0,s.jsxs)(eh,{value:r,onValueChange:e=>{l(e),"auto"===e&&t("")},className:"grid gap-4",children:[s.jsx(n.Zb,{className:`cursor-pointer transition-all ${"manual"===r?"ring-2 ring-primary":""}`,children:s.jsx(n.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx(ep,{value:"manual",id:"manual",className:"mt-1"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(h._,{htmlFor:"manual",className:"flex items-center gap-2 font-medium text-lg cursor-pointer",children:[s.jsx(eM,{className:"h-5 w-5"}),"I'll write my own story"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Express your creativity by writing the story yourself"})]})]})})}),s.jsx(n.Zb,{className:`cursor-pointer transition-all ${"auto"===r?"ring-2 ring-primary":""}`,children:s.jsx(n.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx(ep,{value:"auto",id:"auto",className:"mt-1"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(h._,{htmlFor:"auto",className:"flex items-center gap-2 font-medium text-lg cursor-pointer",children:[s.jsx(eP.Z,{className:"h-5 w-5"}),"Help me write it!"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Let our AI create a unique story based on your chosen genre"})]})]})})})]}),"auto"===r&&(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx(h._,{children:"Choose a story genre"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:eI.map(e=>{let t=e.icon;return s.jsx(n.Zb,{className:`cursor-pointer transition-all hover:shadow-md ${a===e.value?"ring-2 ring-primary bg-primary/5":""}`,onClick:()=>i(e.value),children:s.jsx(n.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center mb-3",children:s.jsx(t,{className:"h-6 w-6 text-primary"})}),s.jsx("h4",{className:"font-semibold mb-1",children:e.label}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),"children"===e.audience&&s.jsx("span",{className:"mt-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"For Children"})]})})},e.value)})})]}),"manual"===r&&(0,s.jsxs)("div",{className:"space-y-2",children:[s.jsx(h._,{htmlFor:"story",children:"Story Text"}),s.jsx(ew,{id:"story",placeholder:"Once upon a time...",value:e,onChange:e=>t(e.target.value),className:"min-h-[300px]"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Word count: ",e.trim().split(/\s+/).length]})]})]})}var eZ=r(1291),ez=r(2933),eq=r(4528),eA=r(58);function eU({formData:e,isSubmitting:t,jobData:r,isPolling:a,pollingError:l,onCancel:o}){let c="auto"===e.storyMode;return(t||a)&&r?(0,s.jsxs)(eA.E.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)(eA.E.div,{animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"relative mb-4",children:[s.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-xl animate-pulse"}),s.jsx(eP.Z,{className:"h-12 w-12 text-primary relative z-10 mx-auto"})]}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:c?"Creating Your Magical Story":"Bringing Your Story to Life"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:c?"Our storytelling wizards are crafting a unique tale just for you...":"Transforming your story into a beautiful illustrated book..."})]}),s.jsx(eq.p,{jobId:r.jobId,jobType:c?"auto-story":"storybook",status:r.status,progress:r.progress,currentStep:r.currentStep,currentPhase:r.currentPhase,estimatedTimeRemaining:r.estimatedTimeRemaining,error:r.error,onCancel:o,showDetails:!0,compact:!1}),l&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-destructive mb-2",children:[s.jsx(eZ.Z,{className:"h-4 w-4"}),s.jsx("span",{className:"text-sm",children:"Connection Error"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:l}),s.jsx(i.z,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:"Refresh Page"})]})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Review Your Story"}),(0,s.jsxs)("p",{className:"text-muted-foreground mb-4",children:["Please review your story details before ",c?"generating":"creating"," the storybook."]})]}),(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{className:"text-lg",children:"Story Title"})}),s.jsx(n.aY,{children:s.jsx("p",{children:e.title})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{className:"text-lg",children:"Character Image"})}),s.jsx(n.aY,{children:e.cartoonizedUrl?s.jsx("div",{className:"aspect-video rounded-lg overflow-hidden",children:s.jsx("img",{src:e.cartoonizedUrl,alt:"Cartoon Character",className:"w-full h-full object-cover"})}):s.jsx("p",{className:"text-muted-foreground",children:"No cartoonized image available"})})]}),(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{className:"text-lg",children:"Settings"})}),(0,s.jsxs)(n.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium",children:"Art Style"}),s.jsx("p",{className:"text-muted-foreground",children:{storybook:"Storybook","semi-realistic":"Semi-Realistic","comic-book":"Comic Book","flat-illustration":"Flat Illustration",anime:"Anime"}[e.cartoonStyle]})]}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium",children:"Target Audience"}),s.jsx("p",{className:"text-muted-foreground",children:{children:"Children",young_adults:"Young Adults",adults:"Adults"}[e.audience]})]}),c&&(0,s.jsxs)("div",{children:[s.jsx("p",{className:"font-medium",children:"Selected Genre"}),s.jsx("p",{className:"text-muted-foreground",children:e.selectedGenre?e.selectedGenre.charAt(0).toUpperCase()+e.selectedGenre.slice(1):"N/A"})]})]})]})]}),!c&&(0,s.jsxs)(n.Zb,{children:[s.jsx(n.Ol,{children:s.jsx(n.ll,{className:"text-lg",children:"Story Preview"})}),s.jsx(n.aY,{children:s.jsx("p",{className:"whitespace-pre-wrap text-sm",children:e.story})})]}),s.jsx(n.Zb,{className:"bg-primary/5 border-primary/20",children:s.jsx(n.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx(ez.Z,{className:"h-5 w-5 text-primary mt-0.5"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-medium mb-1",children:"Ready to Create Your Storybook"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:c?"Your story will be generated using AI based on your selected genre and character. This process typically takes 3-5 minutes and will create a complete storybook with illustrations.":"Your story will be transformed into a beautifully illustrated storybook. Each scene will be carefully crafted based on your story text and chosen style. This process typically takes 2-4 minutes."})]})]})})}),c&&s.jsx(n.Zb,{className:"bg-blue-50 border-blue-200",children:s.jsx(n.aY,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx(eS.Z,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-800 mb-1",children:"AI Story Generation Process"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[s.jsx("li",{children:"â€¢ Generate story content based on your genre"}),s.jsx("li",{children:"â€¢ Create scene breakdown and visual descriptions"}),s.jsx("li",{children:"â€¢ Generate custom illustrations for each scene"}),s.jsx("li",{children:"â€¢ Assemble your complete storybook"})]})]})]})})})]})]})}var e_=r(339),eY=r(4749),eF=r(295),eT=r(3965);class e$ extends a.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function eG({children:e,isPresent:t}){let r=(0,a.useId)(),l=(0,a.useRef)(null),i=(0,a.useRef)({width:0,height:0,top:0,left:0}),{nonce:n}=(0,a.useContext)(eT._);return(0,a.useInsertionEffect)(()=>{let{width:e,height:s,top:a,left:o}=i.current;if(t||!l.current||!e||!s)return;l.current.dataset.motionPopId=r;let c=document.createElement("style");return n&&(c.nonce=n),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${s}px !important;
            top: ${a}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),(0,s.jsx)(e$,{isPresent:t,childRef:l,sizeRef:i,children:a.cloneElement(e,{ref:l})})}let eD=({children:e,initial:t,isPresent:r,onExitComplete:l,custom:i,presenceAffectsLayout:n,mode:o})=>{let c=(0,eY.h)(eL),d=(0,a.useId)(),u=(0,a.useCallback)(e=>{for(let t of(c.set(e,!0),c.values()))if(!t)return;l&&l()},[c,l]),m=(0,a.useMemo)(()=>({id:d,initial:t,isPresent:r,custom:i,onExitComplete:u,register:e=>(c.set(e,!1),()=>c.delete(e))}),n?[Math.random(),u]:[r,u]);return(0,a.useMemo)(()=>{c.forEach((e,t)=>c.set(t,!1))},[r]),a.useEffect(()=>{r||c.size||!l||l()},[r]),"popLayout"===o&&(e=(0,s.jsx)(eG,{isPresent:r,children:e})),(0,s.jsx)(eF.O.Provider,{value:m,children:e})};function eL(){return new Map}var eO=r(6933);let eV=e=>e.key||"";function eH(e){let t=[];return a.Children.forEach(e,e=>{(0,a.isValidElement)(e)&&t.push(e)}),t}var eB=r(2482);let eW=({children:e,custom:t,initial:r=!0,onExitComplete:l,presenceAffectsLayout:i=!0,mode:n="sync",propagate:o=!1})=>{let[c,d]=(0,eO.oO)(o),u=(0,a.useMemo)(()=>eH(e),[e]),m=o&&!c?[]:u.map(eV),h=(0,a.useRef)(!0),p=(0,a.useRef)(u),x=(0,eY.h)(()=>new Map),[f,g]=(0,a.useState)(u),[y,b]=(0,a.useState)(u);(0,eB.L)(()=>{h.current=!1,p.current=u;for(let e=0;e<y.length;e++){let t=eV(y[e]);m.includes(t)?x.delete(t):!0!==x.get(t)&&x.set(t,!1)}},[y,m.length,m.join("-")]);let j=[];if(u!==f){let e=[...u];for(let t=0;t<y.length;t++){let r=y[t],s=eV(r);m.includes(s)||(e.splice(t,0,r),j.push(r))}"wait"===n&&j.length&&(e=j),b(eH(e)),g(u);return}let{forceRender:v}=(0,a.useContext)(e_.p);return(0,s.jsx)(s.Fragment,{children:y.map(e=>{let a=eV(e),f=(!o||!!c)&&(u===y||m.includes(a));return(0,s.jsx)(eD,{isPresent:f,initial:(!h.current||!!r)&&void 0,custom:f?void 0:t,presenceAffectsLayout:i,mode:n,onExitComplete:f?void 0:()=>{if(!x.has(a))return;x.set(a,!0);let e=!0;x.forEach(t=>{t||(e=!1)}),e&&(null==v||v(),b(p.current),o&&(null==d||d()),l&&l())},children:e},a)})})};function eJ(){let[e,t]=(0,a.useState)(1),[r,c]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[x,f]=(0,a.useState)(null),[g,y]=(0,a.useState)({title:"",characterImage:null,cartoonStyle:"",audience:"children",story:"",storyMode:"manual"}),b=(0,l.useRouter)(),{toast:j}=(0,q.pm)(),v=(0,Y.x)(),{data:N,isPolling:w,error:k,stopPolling:C}=function(e,t,r={}){let{pollingInterval:s=2e3,maxRetries:l=3,onStatusChange:i,onProgress:n,onComplete:o,onError:c,autoStart:d=!0}=r,[u,m]=(0,a.useState)(null),[h,p]=(0,a.useState)(!1),[x,f]=(0,a.useState)(null),[g,y]=(0,a.useState)(0),b=(0,a.useRef)(null),j=(0,a.useRef)(null),v=(0,a.useRef)(null),N=(0,a.useRef)(-1),w=(0,a.useCallback)(()=>{b.current&&(clearInterval(b.current),b.current=null),j.current&&(j.current.abort(),j.current=null),p(!1)},[]),k=(0,a.useCallback)(async()=>{if(!e||!t)return null;try{j.current=new AbortController;let e=await fetch(t,{signal:j.current.signal,headers:{"Cache-Control":"no-cache"}});if(!e.ok)throw Error(`HTTP ${e.status}: ${e.statusText}`);let r=await e.json();return y(0),f(null),r}catch(t){if("AbortError"===t.name)return null;console.error("Job polling error:",t),y(e=>e+1);let e=t.message||"Failed to fetch job status";return f(e),c&&c(e,u),null}},[e,t,c,u]),C=(0,a.useCallback)(()=>{e&&t&&!h&&(console.log(`ðŸ”„ Starting job polling for: ${e}`),p(!0),f(null),k().then(e=>{e&&m(e)}),b.current=setInterval(async()=>{let t=await k();t&&(m(t),v.current!==t.status&&(v.current=t.status,i&&i(t.status,t)),N.current!==t.progress&&(N.current=t.progress,n&&n(t.progress,t)),"completed"===t.status&&(console.log(`âœ… Job completed: ${e}`),w(),o&&t.result&&o(t.result,t)),"failed"===t.status&&(console.log(`âŒ Job failed: ${e}`),w(),c&&t.error&&c(t.error,t)),"cancelled"===t.status&&(console.log(`ðŸš« Job cancelled: ${e}`),w()))},s))},[e,t,h,s,k,i,n,o,c,w]),S=(0,a.useCallback)(()=>{console.log(`â¹ï¸ Stopping job polling for: ${e}`),w()},[e,w]),R=(0,a.useCallback)(()=>{if(g>=l){f(`Max retries (${l}) exceeded`);return}console.log(`ðŸ”„ Retrying job polling for: ${e} (attempt ${g+1})`),S(),setTimeout(()=>{C()},1e3*Math.pow(2,g))},[e,g,l,S,C]),M=(0,a.useCallback)(async()=>{if(!e||!u)return!1;try{if((await fetch(`/api/jobs/cancel/${e}`,{method:"POST"})).ok)return S(),m(e=>e?{...e,status:"cancelled"}:null),!0;return!1}catch(e){return console.error("Failed to cancel job:",e),!1}},[e,u,S]);return{data:u,isPolling:h,error:x,startPolling:C,stopPolling:S,retry:R,cancel:M}}(m,x,{onComplete:e=>{j({title:"Success!",description:"Your storybook has been created successfully."}),e.storybook_id?b.push(`/storybook/${e.storybook_id}`):b.push("/storybook/library")},onError:e=>{j({variant:"destructive",title:"Generation Failed",description:e}),c(!1),h(null),f(null)}}),S=e=>{y(t=>({...t,...e}))},R=async()=>{c(!0);try{let{data:{session:e}}=await v.auth.getSession();if("auto"===g.storyMode){if(!e?.user){j({variant:"destructive",title:"Authentication Required",description:"Please sign in to generate an automatic story."}),c(!1);return}let{jobId:t,pollingUrl:r}=await F.hi.startAutoStoryJob({genre:g.selectedGenre,characterDescription:g.characterDescription,cartoonImageUrl:g.cartoonizedUrl,audience:g.audience});h(t),f(r),j({title:"Story Generation Started",description:"Your auto-story is being generated in the background."})}else{let{jobId:e,pollingUrl:t}=await F.hi.startScenesJob({story:g.story,characterImage:g.cartoonizedUrl,audience:g.audience}),{jobId:r,pollingUrl:s}=await F.hi.startStorybookJob({title:g.title,story:g.story,characterImage:g.cartoonizedUrl,pages:[],audience:g.audience,isReusedImage:!0});h(r),f(s),j({title:"Storybook Creation Started",description:"Your storybook is being created in the background."})}t(7)}catch(e){j({variant:"destructive",title:"Error",description:e.message||"Failed to start storybook creation"}),c(!1)}},M=async()=>{if(m)try{await F.hi.cancelJob(m),C(),h(null),f(null),c(!1),j({title:"Cancelled",description:"Storybook creation has been cancelled."})}catch(e){console.error("Failed to cancel job:",e)}};return 7===e&&(r||w)?s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsx(n.Zb,{className:"w-full max-w-2xl mx-auto",children:(0,s.jsxs)(n.aY,{className:"p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Creating Your Storybook"}),s.jsx("p",{className:"text-muted-foreground",children:"Please wait while we generate your personalized storybook"})]}),N&&s.jsx(eq.p,{jobId:N.jobId,jobType:"auto"===g.storyMode?"auto-story":"storybook",status:N.status,progress:N.progress,currentStep:N.currentStep,currentPhase:N.currentPhase,estimatedTimeRemaining:N.estimatedTimeRemaining,error:N.error,onCancel:M,showDetails:!0}),k&&(0,s.jsxs)("div",{className:"mt-6 text-center",children:[s.jsx("p",{className:"text-destructive mb-4",children:k}),s.jsx(i.z,{variant:"outline",onClick:()=>window.location.reload(),children:"Refresh Page"})]})]})})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-8",children:s.jsx(n.Zb,{className:"w-full max-w-md mx-auto rounded-2xl shadow-xl",children:(0,s.jsxs)(n.aY,{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-2",children:"Create Your Story"}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground text-center mb-4",children:["Step ",e," of 7"]}),s.jsx("div",{className:"w-full h-3 bg-gray-200 rounded-full",children:s.jsx("div",{className:"bg-primary h-3 rounded-full transition-all duration-300",style:{width:`${e/7*100}%`}})})]}),s.jsx("div",{className:"min-h-[400px] flex flex-col justify-center px-2 md:px-4",children:s.jsx(eW,{mode:"wait",children:s.jsx(eA.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:(()=>{switch(e){case 1:return s.jsx(p,{value:g.title,onChange:e=>S({title:e})});case 2:return s.jsx(T,{formData:g,updateFormData:S});case 3:return s.jsx(ef,{value:g.cartoonStyle,onChange:e=>S({cartoonStyle:e})});case 4:return s.jsx(ey,{imageUrl:g.imageUrl,cartoonStyle:g.cartoonStyle,cartoonizedUrl:g.cartoonizedUrl,updateFormData:S});case 5:return s.jsx(eN,{value:g.audience,onChange:e=>S({audience:e})});case 6:return s.jsx(eE,{value:g.story,onChange:e=>S({story:e}),storyMode:g.storyMode,selectedGenre:g.selectedGenre,onModeChange:e=>S({storyMode:e}),onGenreChange:e=>S({selectedGenre:e})});case 7:return s.jsx(eU,{formData:g,isSubmitting:r,jobData:N,isPolling:w,pollingError:k,onCancel:M});default:return null}})()},e)})}),(0,s.jsxs)("div",{className:"flex justify-between mt-6 space-x-4",children:[(0,s.jsxs)(i.z,{variant:"outline",onClick:()=>{e>1&&t(e=>e-1)},disabled:1===e||r,className:"w-full bg-gray-100 text-gray-700 py-3 rounded-xl border",children:[s.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"Back"]}),e<7?(0,s.jsxs)(i.z,{onClick:()=>{e<7&&t(e=>e+1)},disabled:(()=>{switch(e){case 1:return!g.title.trim();case 2:return!g.characterImage&&!g.imageUrl;case 3:return!g.cartoonStyle;case 4:return!g.cartoonizedUrl;case 5:return!g.audience;case 6:return"manual"===g.storyMode?!g.story.trim():!g.selectedGenre;default:return!1}})()||r,className:"w-full bg-black text-white font-semibold py-3 rounded-xl",children:["Next",s.jsx(d,{className:"ml-2 h-4 w-4"})]}):s.jsx(i.z,{onClick:R,disabled:r,className:"w-full bg-black text-white font-semibold py-3 rounded-xl",children:r?(0,s.jsxs)(s.Fragment,{children:[s.jsx(u.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Starting..."]}):"Create Storybook"})]})]})})})}function eX(){return s.jsx("div",{className:"min-h-screen bg-background py-12",children:s.jsx("div",{className:"container",children:s.jsx(eJ,{})})})}},1048:(e,t,r)=>{"use strict";r.d(t,{_:()=>c});var s=r(326),a=r(7577),l=r(4478),i=r(9360),n=r(7863);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...t},r)=>s.jsx(l.f,{ref:r,className:(0,n.cn)(o(),e),...t}));c.displayName=l.f.displayName},6333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(2881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9635:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(2881).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},646:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/home/project/app/create/page.tsx#default`)},4478:(e,t,r)=>{"use strict";r.d(t,{f:()=>n});var s=r(7577),a=r(5226),l=r(326),i=s.forwardRef((e,t)=>(0,l.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var n=i},3405:(e,t,r)=>{"use strict";r.d(t,{D:()=>a});var s=r(7577);function a(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[759,655,371,474,8],()=>r(7743));module.exports=s})();